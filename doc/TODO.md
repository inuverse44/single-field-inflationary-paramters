# TODOリスト

## 優先度: 高

### 1. 探索範囲の外部化

-   **課題:** `calculation.rs` 内で `phi_end` と `phi_exit` の探索範囲がハードコードされている。これでは新しいモデルを追加するたびにコードの修正が必要になる。
-   **解決策:** 探索範囲を `config.toml` でシミュレーションごとに設定できるようにする。
    -   `config.rs` の構造体を修正する。
    -   `calculation::calculate_ns_r` が探索範囲を引数で受け取るように修正する。

## 優先度: 中

### 2. `config.toml` の設定ミス修正

-   **課題:** 2つ目の `[[simulations]]` ブロックで、`output_file` が `starobinsky.csv` になっているが、`model` は `"Chaotic"` のままになっている。
-   **解決策:** モデル名を意図したもの（例: `"Starobinsky"`）に修正するか、設定が正しいか確認する。

### 3. `solver.rs` のエラー処理の改善

-   **課題:** `solver.rs` の各関数が返すエラーが `&'static str`（文字列リテラル）になっている。これでは呼び出し元でエラーの種類に応じた分岐処理がしにくい。
-   **解決策:** `SolverError` という `enum` を定義し、`Result<f64, SolverError>` を返すように変更する。これにより、`match` を使った堅牢なエラーハンドリングが可能になる。

## 優先度: 低

### 4. `simpson` 関数の収束性

-   **課題:** `solver.rs` の `simpson` 関数は、精度内で収束しなかった場合にコンソールにメッセージを出すだけで、最後の計算結果を返している。これは結果が不正確である可能性を呼び出し元に伝えていない。
-   **解決策:** `simpson` 関数も `Result` を返すようにし、収束しなかった場合は `Err` を返すように変更する。

### 5. CLIのUX向上

-   **課題:** 計算ステップごとに `println!` で進捗を出力しているが、ステップ数が多いとコンソールが流れすぎてしまう。
-   **解決策:** `indicatif` のようなクレートを導入し、見やすいプログレスバーを表示することを検討する。

## 将来的な目標

### 6. Webアプリ化 (WebAssembly)

-   **課題:** 現在の可視化はPythonスクリプトに依存している。より統合された対話的な体験を提供したい。
-   **解決策:** RustとWebAssembly (Wasm) を利用して、計算結果をブラウザ上で直接描画するWebアプリケーションを構築する。
    -   RustのWasm向けフロントエンドフレームワーク（`Yew`や`Dioxus`など）の調査と学習。
    -   Rustの計算結果をWasm経由でJavaScriptに渡し、`Chart.js` や `D3.js` などのライブラリで描画する。